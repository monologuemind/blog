import{S as B,i as D,s as H,k,e as b,a as J,v as Q,l as E,m as S,h as m,c as R,w as U,n as V,C as W,b as g,E as P,F as L,x as X,G as y,f as Y,t as Z,y as $,L as x,M as F,q as z,r as A,K as ee,u as te,P as ae}from"../../../../chunks/index-dc0a15ca.js";import{E as le}from"../../../../chunks/Edit-cdfb9dd6.js";import{g as ie}from"../../../../chunks/navigation-8866a37a.js";import{p as se}from"../../../../chunks/stores-10c01727.js";import{g as ne}from"../../../../chunks/data-b44c116b.js";import{b as oe}from"../../../../chunks/paths-14676dcd.js";function G(n,e,l){const t=n.slice();return t[6]=e[l],t}function K(n){let e,l;return{c(){e=k("option"),l=z("Select a file to edit"),this.h()},l(t){e=E(t,"OPTION",{});var r=S(e);l=A(r,"Select a file to edit"),r.forEach(m),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="Select a file to edit",e.value=e.__value},m(t,r){g(t,e,r),P(e,l)},d(t){t&&m(e)}}}function M(n){var r;let e,l=(r=n[2])==null?void 0:r.articles,t=[];for(let a=0;a<l.length;a+=1)t[a]=j(G(n,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=b()},l(a){for(let i=0;i<t.length;i+=1)t[i].l(a);e=b()},m(a,i){for(let h=0;h<t.length;h+=1)t[h].m(a,i);g(a,e,i)},p(a,i){var h;if(i&4){l=(h=a[2])==null?void 0:h.articles;let f;for(f=0;f<l.length;f+=1){const o=G(a,l,f);t[f]?t[f].p(o,i):(t[f]=j(o),t[f].c(),t[f].m(e.parentNode,e))}for(;f<t.length;f+=1)t[f].d(1);t.length=l.length}},d(a){ee(t,a),a&&m(e)}}}function j(n){let e,l=n[6].name+"",t,r;return{c(){e=k("option"),t=z(l),this.h()},l(a){e=E(a,"OPTION",{});var i=S(e);t=A(i,l),i.forEach(m),this.h()},h(){e.__value=r=n[6].name,e.value=e.__value},m(a,i){g(a,e,i),P(e,t)},p(a,i){i&4&&l!==(l=a[6].name+"")&&te(t,l),i&4&&r!==(r=a[6].name)&&(e.__value=r,e.value=e.__value)},d(a){a&&m(e)}}}function re(n){var u,d,p,v;let e,l,t,r,a,i,h,f,o=!((u=n[0])!=null&&u.file_data)&&K(),c=((p=(d=n[2])==null?void 0:d.articles)==null?void 0:p.length)&&M(n);return a=new le({props:{source:((v=n[0])==null?void 0:v.file_data)||"",editable:!0}}),{c(){e=k("select"),o&&o.c(),l=b(),c&&c.c(),r=J(),Q(a.$$.fragment),this.h()},l(s){e=E(s,"SELECT",{class:!0});var _=S(e);o&&o.l(_),l=b(),c&&c.l(_),_.forEach(m),r=R(s),U(a.$$.fragment,s),this.h()},h(){var s,_;e.disabled=t=!((_=(s=n[2])==null?void 0:s.articles)!=null&&_.length),V(e,"class","select w-full max-w-xs"),n[1]===void 0&&W(()=>n[4].call(e))},m(s,_){g(s,e,_),o&&o.m(e,null),P(e,l),c&&c.m(e,null),L(e,n[1]),g(s,r,_),X(a,s,_),i=!0,h||(f=[y(e,"change",n[4]),y(e,"change",n[3])],h=!0)},p(s,[_]){var O,C,N,T,q,I;(O=s[0])!=null&&O.file_data?o&&(o.d(1),o=null):o||(o=K(),o.c(),o.m(e,l)),(N=(C=s[2])==null?void 0:C.articles)!=null&&N.length?c?c.p(s,_):(c=M(s),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!i||_&4&&t!==(t=!((q=(T=s[2])==null?void 0:T.articles)!=null&&q.length)))&&(e.disabled=t),_&6&&L(e,s[1]);const w={};_&1&&(w.source=((I=s[0])==null?void 0:I.file_data)||""),a.$set(w)},i(s){i||(Y(a.$$.fragment,s),i=!0)},o(s){Z(a.$$.fragment,s),i=!1},d(s){s&&m(e),o&&o.d(),c&&c.d(),s&&m(r),$(a,s),h=!1,x(f)}}}function ce(n,e,l){var o,c;let t,r;F(n,ne,u=>l(2,t=u)),F(n,se,u=>l(5,r=u));let{data:a}=e,i=(c=(o=t==null?void 0:t.articles)==null?void 0:o.find(u=>u.path===r.url.searchParams.get("file_path")))==null?void 0:c.name;const h=()=>{var d,p;const u=(p=(d=t==null?void 0:t.articles)==null?void 0:d.find(v=>v.name===i))==null?void 0:p.path;u&&ie(`${oe}/edit?file_path=${u}`)};function f(){i=ae(this),l(1,i)}return n.$$set=u=>{"data"in u&&l(0,a=u.data)},[a,i,t,h,f]}class pe extends B{constructor(e){super(),D(this,e,ce,re,H,{data:0})}}export{pe as default};
