import{S as me,i as pe,s as ve,Z as ge,_ as be,k as v,e as A,a as L,q as B,v as ae,l as g,m as b,h as d,c as Z,r as F,w as te,n as k,$ as we,p as C,b as H,D as h,a0 as le,x as se,J as ie,a1 as ke,f as re,t as oe,y as ne,a2 as Ee,H as ce,P as Ie,u as Ve,a3 as De}from"../../../chunks/index-706dfd2d.js";import{M as $e}from"../../../chunks/Markdown-b33ce313.js";import{C as ye}from"../../../chunks/CodeMirror-9e002ec6.js";import{g as Se}from"../../../chunks/navigation-5802da58.js";import{p as Pe}from"../../../chunks/stores-6a1fdb1b.js";import{g as Ce}from"../../../chunks/data-8eb3fc9b.js";import{b as Oe}from"../../../chunks/paths-7e180b47.js";function fe(r,e,i){const t=r.slice();return t[7]=e[i],t}function de(r){let e,i;return{c(){e=v("option"),i=B("Select a file to edit"),this.h()},l(t){e=g(t,"OPTION",{});var n=b(e);i=F(n,"Select a file to edit"),n.forEach(d),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="Select a file to edit",e.value=e.__value},m(t,n){H(t,e,n),h(e,i)},d(t){t&&d(e)}}}function _e(r){var n;let e,i=(n=r[2])==null?void 0:n.articles,t=[];for(let a=0;a<i.length;a+=1)t[a]=ue(fe(r,i,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=A()},l(a){for(let s=0;s<t.length;s+=1)t[s].l(a);e=A()},m(a,s){for(let f=0;f<t.length;f+=1)t[f].m(a,s);H(a,e,s)},p(a,s){var f;if(s&4){i=(f=a[2])==null?void 0:f.articles;let o;for(o=0;o<i.length;o+=1){const E=fe(a,i,o);t[o]?t[o].p(E,s):(t[o]=ue(E),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=i.length}},d(a){Ie(t,a),a&&d(e)}}}function ue(r){let e,i=r[7].name+"",t,n;return{c(){e=v("option"),t=B(i),this.h()},l(a){e=g(a,"OPTION",{});var s=b(e);t=F(s,i),s.forEach(d),this.h()},h(){e.__value=n=r[7].name,e.value=e.__value},m(a,s){H(a,e,s),h(e,t)},p(a,s){s&4&&i!==(i=a[7].name+"")&&Ve(t,i),s&4&&n!==(n=a[7].name)&&(e.__value=n,e.value=e.__value)},d(a){a&&d(e)}}}function qe(r){var W,X,Y,x;let e,i,t,n,a,s,f,o,E,O,p,c,q,I,M,$,V,y,G,K,D,N,Q,R,m=!((W=r[0])!=null&&W.file_data)&&de(),_=((Y=(X=r[2])==null?void 0:X.articles)==null?void 0:Y.length)&&_e(r);function he(l){r[5](l)}let U={};return r[0].file_data!==void 0&&(U.value=r[0].file_data),p=new ye({props:U}),ge.push(()=>be(p,"value",he)),D=new $e({props:{source:((x=r[0])==null?void 0:x.file_data)||""}}),{c(){e=v("select"),m&&m.c(),i=A(),_&&_.c(),n=L(),a=v("div"),s=v("div"),f=v("div"),o=v("h2"),E=B("Editor"),O=L(),ae(p.$$.fragment),q=L(),I=v("div"),M=L(),$=v("div"),V=v("div"),y=v("h2"),G=B("Viewer"),K=L(),ae(D.$$.fragment),this.h()},l(l){e=g(l,"SELECT",{class:!0});var u=b(e);m&&m.l(u),i=A(),_&&_.l(u),u.forEach(d),n=Z(l),a=g(l,"DIV",{class:!0});var w=b(a);s=g(w,"DIV",{class:!0});var T=b(s);f=g(T,"DIV",{class:!0});var S=b(f);o=g(S,"H2",{class:!0});var j=b(o);E=F(j,"Editor"),j.forEach(d),O=Z(S),te(p.$$.fragment,S),S.forEach(d),T.forEach(d),q=Z(w),I=g(w,"DIV",{class:!0}),b(I).forEach(d),M=Z(w),$=g(w,"DIV",{class:!0});var z=b($);V=g(z,"DIV",{class:!0});var P=b(V);y=g(P,"H2",{class:!0});var J=b(y);G=F(J,"Viewer"),J.forEach(d),K=Z(P),te(D.$$.fragment,P),P.forEach(d),z.forEach(d),w.forEach(d),this.h()},h(){var l,u;e.disabled=t=!((u=(l=r[2])==null?void 0:l.articles)!=null&&u.length),k(e,"class","select w-full max-w-xs"),r[1]===void 0&&we(()=>r[4].call(e)),k(o,"class","card-title"),C(o,"display","block",!1),k(f,"class","card-body"),k(s,"class","card card-compact w-96 bg-base-100 shadow-xl"),C(s,"width","100%",!1),k(I,"class","divider divider-horizontal"),k(y,"class","card-title"),C(y,"display","block",!1),k(V,"class","card-body"),k($,"class","card card-compact w-96 bg-base-100 shadow-xl"),C($,"width","100%",!1),k(a,"class","flex w-full lg:flex-row"),C(a,"justify-content","center",!1),C(a,"width","100%",!1),C(a,"height","100%",!1)},m(l,u){H(l,e,u),m&&m.m(e,null),h(e,i),_&&_.m(e,null),le(e,r[1]),H(l,n,u),H(l,a,u),h(a,s),h(s,f),h(f,o),h(o,E),h(f,O),se(p,f,null),h(a,q),h(a,I),h(a,M),h(a,$),h($,V),h(V,y),h(y,G),h(V,K),se(D,V,null),N=!0,Q||(R=[ie(e,"change",r[4]),ie(e,"change",r[3])],Q=!0)},p(l,[u]){var S,j,z,P,J,ee;(S=l[0])!=null&&S.file_data?m&&(m.d(1),m=null):m||(m=de(),m.c(),m.m(e,i)),(z=(j=l[2])==null?void 0:j.articles)!=null&&z.length?_?_.p(l,u):(_=_e(l),_.c(),_.m(e,null)):_&&(_.d(1),_=null),(!N||u&4&&t!==(t=!((J=(P=l[2])==null?void 0:P.articles)!=null&&J.length)))&&(e.disabled=t),u&6&&le(e,l[1]);const w={};!c&&u&1&&(c=!0,w.value=l[0].file_data,ke(()=>c=!1)),p.$set(w);const T={};u&1&&(T.source=((ee=l[0])==null?void 0:ee.file_data)||""),D.$set(T)},i(l){N||(re(p.$$.fragment,l),re(D.$$.fragment,l),N=!0)},o(l){oe(p.$$.fragment,l),oe(D.$$.fragment,l),N=!1},d(l){l&&d(e),m&&m.d(),_&&_.d(),l&&d(n),l&&d(a),ne(p),ne(D),Q=!1,Ee(R)}}}function He(r,e,i){var O,p;let t,n;ce(r,Ce,c=>i(2,t=c)),ce(r,Pe,c=>i(6,n=c));let{data:a}=e,s=(p=(O=t==null?void 0:t.articles)==null?void 0:O.find(c=>c.path===n.url.searchParams.get("file_path")))==null?void 0:p.name;const f=()=>{var q,I;const c=(I=(q=t==null?void 0:t.articles)==null?void 0:q.find(M=>M.name===s))==null?void 0:I.path;c&&Se(`${Oe}/edit?file_path=${c}`)};function o(){s=De(this),i(1,s)}function E(c){r.$$.not_equal(a.file_data,c)&&(a.file_data=c,i(0,a))}return r.$$set=c=>{"data"in c&&i(0,a=c.data)},[a,s,t,f,o,E]}class Ze extends me{constructor(e){super(),pe(this,e,He,qe,ve,{data:0})}}export{Ze as default};
