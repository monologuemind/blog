import{S as F,i as G,s as K,k,e as b,a as M,v as Q,l as E,m as S,h as m,c as R,w as U,n as V,$ as W,b as g,D as P,a0 as y,x as X,J as D,f as Y,t as Z,y as $,a1 as x,H,q as A,r as B,P as ee,u as te,a2 as ae}from"../../../chunks/index-35b12e3c.js";import{E as le}from"../../../chunks/Edit-9572f06e.js";import{g as ie}from"../../../chunks/navigation-5927b467.js";import{p as se}from"../../../chunks/stores-b24668e6.js";import{g as ne}from"../../../chunks/data-36da4607.js";import{b as oe}from"../../../chunks/paths-dc1081f2.js";function J(n,e,l){const t=n.slice();return t[6]=e[l],t}function L(n){let e,l;return{c(){e=k("option"),l=A("Select a file to edit"),this.h()},l(t){e=E(t,"OPTION",{});var r=S(e);l=B(r,"Select a file to edit"),r.forEach(m),this.h()},h(){e.disabled=!0,e.selected=!0,e.__value="Select a file to edit",e.value=e.__value},m(t,r){g(t,e,r),P(e,l)},d(t){t&&m(e)}}}function j(n){var r;let e,l=(r=n[2])==null?void 0:r.articles,t=[];for(let a=0;a<l.length;a+=1)t[a]=z(J(n,l,a));return{c(){for(let a=0;a<t.length;a+=1)t[a].c();e=b()},l(a){for(let i=0;i<t.length;i+=1)t[i].l(a);e=b()},m(a,i){for(let h=0;h<t.length;h+=1)t[h].m(a,i);g(a,e,i)},p(a,i){var h;if(i&4){l=(h=a[2])==null?void 0:h.articles;let f;for(f=0;f<l.length;f+=1){const o=J(a,l,f);t[f]?t[f].p(o,i):(t[f]=z(o),t[f].c(),t[f].m(e.parentNode,e))}for(;f<t.length;f+=1)t[f].d(1);t.length=l.length}},d(a){ee(t,a),a&&m(e)}}}function z(n){let e,l=n[6].name+"",t,r;return{c(){e=k("option"),t=A(l),this.h()},l(a){e=E(a,"OPTION",{});var i=S(e);t=B(i,l),i.forEach(m),this.h()},h(){e.__value=r=n[6].name,e.value=e.__value},m(a,i){g(a,e,i),P(e,t)},p(a,i){i&4&&l!==(l=a[6].name+"")&&te(t,l),i&4&&r!==(r=a[6].name)&&(e.__value=r,e.value=e.__value)},d(a){a&&m(e)}}}function re(n){var u,d,p,v;let e,l,t,r,a,i,h,f,o=!((u=n[0])!=null&&u.file_data)&&L(),c=((p=(d=n[2])==null?void 0:d.articles)==null?void 0:p.length)&&j(n);return a=new le({props:{source:((v=n[0])==null?void 0:v.file_data)||"",editable:!0}}),{c(){e=k("select"),o&&o.c(),l=b(),c&&c.c(),r=M(),Q(a.$$.fragment),this.h()},l(s){e=E(s,"SELECT",{class:!0});var _=S(e);o&&o.l(_),l=b(),c&&c.l(_),_.forEach(m),r=R(s),U(a.$$.fragment,s),this.h()},h(){var s,_;e.disabled=t=!((_=(s=n[2])==null?void 0:s.articles)!=null&&_.length),V(e,"class","select w-full max-w-xs"),n[1]===void 0&&W(()=>n[4].call(e))},m(s,_){g(s,e,_),o&&o.m(e,null),P(e,l),c&&c.m(e,null),y(e,n[1]),g(s,r,_),X(a,s,_),i=!0,h||(f=[D(e,"change",n[4]),D(e,"change",n[3])],h=!0)},p(s,[_]){var O,N,T,q,C,I;(O=s[0])!=null&&O.file_data?o&&(o.d(1),o=null):o||(o=L(),o.c(),o.m(e,l)),(T=(N=s[2])==null?void 0:N.articles)!=null&&T.length?c?c.p(s,_):(c=j(s),c.c(),c.m(e,null)):c&&(c.d(1),c=null),(!i||_&4&&t!==(t=!((C=(q=s[2])==null?void 0:q.articles)!=null&&C.length)))&&(e.disabled=t),_&6&&y(e,s[1]);const w={};_&1&&(w.source=((I=s[0])==null?void 0:I.file_data)||""),a.$set(w)},i(s){i||(Y(a.$$.fragment,s),i=!0)},o(s){Z(a.$$.fragment,s),i=!1},d(s){s&&m(e),o&&o.d(),c&&c.d(),s&&m(r),$(a,s),h=!1,x(f)}}}function ce(n,e,l){var o,c;let t,r;H(n,ne,u=>l(2,t=u)),H(n,se,u=>l(5,r=u));let{data:a}=e,i=(c=(o=t==null?void 0:t.articles)==null?void 0:o.find(u=>u.path===r.url.searchParams.get("file_path")))==null?void 0:c.name;const h=()=>{var d,p;const u=(p=(d=t==null?void 0:t.articles)==null?void 0:d.find(v=>v.name===i))==null?void 0:p.path;u&&ie(`${oe}/edit?file_path=${u}`)};function f(){i=ae(this),l(1,i)}return n.$$set=u=>{"data"in u&&l(0,a=u.data)},[a,i,t,h,f]}class pe extends F{constructor(e){super(),G(this,e,ce,re,K,{data:0})}}export{pe as default};
